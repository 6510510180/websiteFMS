<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<title>เพิ่ม/แก้ไขข้อมูล QA | FMS Admin</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Thai:wght@300;400;500;600;700&family=Lexend:wght@400;500;600;700;800&display=swap" rel="stylesheet">
<style>
:root {
  --purple:       #6B3FA0;
  --purple-dark:  #4A2870;
  --purple-light: #F3EEFF;
  --purple-mid:   #E8DEFF;
  --accent:       #9B6DD1;
  --bg:           #F7F5FA;
  --white:        #FFFFFF;
  --text:         #181117;
  --text-sub:     #64748B;
  --border:       #EDE8F5;
  --red:          #EF4444;
  --red-bg:       #FEE2E2;
  --blue:         #3B82F6;
  --blue-bg:      #EFF6FF;
  --amber:        #F59E0B;
  --amber-bg:     #FFFBEB;
  --green:        #10B981;
  --green-bg:     #ECFDF5;
  --sidebar-w:    240px;
  --topbar-h:     64px;
  --radius:       12px;
  --shadow:       0 1px 3px rgba(0,0,0,0.07), 0 1px 2px rgba(0,0,0,0.04);
  --shadow-md:    0 4px 12px rgba(107,63,160,0.10);
}
* { box-sizing: border-box; margin: 0; padding: 0; }
body { font-family: 'Noto Sans Thai', 'Lexend', sans-serif; background: var(--bg); color: var(--text); display: flex; min-height: 100vh; }

/* ── SIDEBAR ── */
.sidebar { width: var(--sidebar-w); background: var(--white); height: 100vh; position: fixed; left: 0; top: 0; display: flex; flex-direction: column; border-right: 1px solid var(--border); z-index: 100; }
.sidebar-brand { padding: 20px 20px 16px; border-bottom: 1px solid var(--border); flex-shrink: 0; }
.sidebar-brand-title { font-family: 'Lexend', sans-serif; font-size: 16px; font-weight: 700; color: var(--text); }
.sidebar-brand-sub { font-size: 11.5px; color: var(--purple); font-weight: 500; margin-top: 2px; }
.sidebar-section-label { padding: 20px 20px 6px; font-size: 10px; font-weight: 700; color: var(--text-sub); text-transform: uppercase; letter-spacing: 1.2px; }
.sidebar-nav { flex: 1; padding: 8px 12px; display: flex; flex-direction: column; gap: 2px; overflow-y: auto; }
.nav-item { display: flex; align-items: center; gap: 10px; padding: 10px 12px; border-radius: 8px; font-size: 13.5px; font-weight: 500; color: var(--text-sub); text-decoration: none; transition: all 0.18s ease; cursor: pointer; user-select: none; }
.nav-item:hover { background: var(--purple-light); color: var(--purple); }
.nav-item.active { background: var(--purple-light); color: var(--purple); font-weight: 600; }
.nav-icon { width: 18px; height: 18px; flex-shrink: 0; opacity: 0.75; }
.nav-item.active .nav-icon, .nav-item:hover .nav-icon { opacity: 1; }
.sidebar-footer { padding: 12px; border-top: 1px solid var(--border); flex-shrink: 0; }
.sidebar-footer .nav-item { color: var(--red); }
.sidebar-footer .nav-item:hover { background: var(--red-bg); color: #DC2626; }

/* ── TOPBAR ── */
.topbar { position: fixed; top: 0; left: var(--sidebar-w); right: 0; height: var(--topbar-h); background: var(--white); border-bottom: 1px solid var(--border); display: flex; align-items: center; justify-content: space-between; padding: 0 32px; z-index: 90; }
.topbar-left { display: flex; flex-direction: column; }
.topbar-title { font-family: 'Lexend', sans-serif; font-size: 16px; font-weight: 700; color: var(--text); }
.topbar-breadcrumb { font-size: 11.5px; color: var(--text-sub); margin-top: 1px; }
.topbar-breadcrumb a { color: var(--purple); text-decoration: none; }
.topbar-breadcrumb a:hover { text-decoration: underline; }
.topbar-right { display: flex; align-items: center; gap: 14px; }
.search-wrap { display: flex; align-items: center; gap: 8px; background: var(--bg); border: 1px solid var(--border); border-radius: 8px; padding: 7px 14px; width: 220px; }
.search-wrap:focus-within { border-color: var(--accent); }
.search-wrap input { border: none; background: none; outline: none; font-size: 13px; color: var(--text); font-family: inherit; width: 100%; }
.search-wrap input::placeholder { color: var(--text-sub); }
.avatar-wrap { display: flex; align-items: center; gap: 10px; cursor: pointer; padding: 6px 10px; border-radius: 8px; transition: background 0.15s; }
.avatar-wrap:hover { background: var(--purple-light); }
.avatar-name { font-size: 13px; font-weight: 600; color: var(--purple); }
.avatar-circle { width: 34px; height: 34px; border-radius: 50%; background: var(--purple-mid); border: 2px solid var(--purple-light); display: flex; align-items: center; justify-content: center; font-size: 12px; font-weight: 700; color: var(--purple); }

/* ── MAIN ── */
.main { margin-left: var(--sidebar-w); padding-top: var(--topbar-h); flex: 1; min-width: 0; }
.page-body { padding: 32px; display: flex; flex-direction: column; gap: 24px; }
.page-heading-wrap { display: flex; flex-direction: column; gap: 4px; }
.page-heading { font-family: 'Lexend', sans-serif; font-size: 26px; font-weight: 800; color: var(--purple); letter-spacing: -0.4px; }
.page-sub { font-size: 14px; color: var(--text-sub); }

/* ── Mode toggle banner ── */
.mode-banner {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 14px 20px;
  border-radius: var(--radius);
  font-size: 14px;
  font-weight: 500;
  border: 1.5px solid;
}
.mode-banner.add-mode {
  background: var(--purple-light);
  border-color: #d8c8f5;
  color: var(--purple-dark);
}
.mode-banner.edit-mode {
  background: var(--amber-bg);
  border-color: #fde68a;
  color: #92400e;
}
.mode-banner svg { flex-shrink: 0; }
.mode-switch-btn {
  margin-left: auto;
  padding: 6px 16px;
  border-radius: 8px;
  border: 1.5px solid currentColor;
  background: transparent;
  font-size: 13px;
  font-weight: 600;
  font-family: inherit;
  cursor: pointer;
  color: inherit;
  transition: background 0.15s;
  white-space: nowrap;
}
.mode-switch-btn:hover { background: rgba(0,0,0,0.06); }

/* ── Category sections ── */
.category-section {
  background: var(--white);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  overflow: hidden;
  box-shadow: var(--shadow);
  animation: fadeUp 0.35s ease both;
}
.category-section:nth-child(1) { animation-delay: 0.05s; }
.category-section:nth-child(2) { animation-delay: 0.10s; }
.category-section:nth-child(3) { animation-delay: 0.15s; }
.category-section:nth-child(4) { animation-delay: 0.20s; }
@keyframes fadeUp { from { opacity: 0; transform: translateY(8px); } to { opacity: 1; transform: translateY(0); } }

.category-header {
  padding: 14px 20px;
  background: var(--bg);
  border-bottom: 1px solid var(--border);
  display: flex;
  align-items: center;
  gap: 10px;
}
.category-dot { width: 10px; height: 10px; border-radius: 50%; flex-shrink: 0; }
.category-dot.purple { background: var(--purple); }
.category-dot.blue   { background: var(--blue); }
.category-dot.amber  { background: var(--amber); }
.category-dot.green  { background: var(--green); }
.category-title { font-family: 'Lexend', sans-serif; font-size: 13px; font-weight: 700; color: var(--text); }
.category-badge { margin-left: auto; font-size: 11px; font-weight: 600; padding: 2px 8px; border-radius: 999px; background: var(--purple-light); color: var(--purple); }

/* ── Item row ── */
.item-row {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 16px;
  padding: 15px 20px;
  border-bottom: 1px solid var(--border);
  transition: background 0.12s;
}
.item-row:last-child { border-bottom: none; }
.item-row:hover { background: var(--purple-light); }
.item-icon { width: 38px; height: 38px; border-radius: 8px; display: flex; align-items: center; justify-content: center; flex-shrink: 0; }
.item-info { flex: 1; min-width: 0; }
.item-name { font-size: 14px; font-weight: 600; color: var(--text); }
.item-desc { font-size: 12px; color: var(--text-sub); margin-top: 2px; }

/* ── Buttons ── */
.btn-action {
  padding: 7px 22px;
  border: none;
  border-radius: 8px;
  font-size: 13px;
  font-weight: 600;
  font-family: inherit;
  cursor: pointer;
  transition: background 0.15s, transform 0.15s;
  white-space: nowrap;
  flex-shrink: 0;
  text-decoration: none;
  display: inline-flex;
  align-items: center;
  gap: 6px;
}
/* Add mode — purple */
.btn-action.add {
  background: var(--purple);
  color: var(--white);
}
.btn-action.add:hover { background: var(--purple-dark); transform: translateY(-1px); }

/* Edit mode — amber */
.btn-action.edit {
  background: var(--amber-bg);
  color: #92400e;
  border: 1.5px solid #fde68a;
}
.btn-action.edit:hover { background: #fef3c7; transform: translateY(-1px); }

svg { display: block; }
</style>
</head>
<body>

<!-- SIDEBAR -->
<aside class="sidebar">
  <div class="sidebar-brand">
    <div class="sidebar-brand-title">FMS Admin</div>
    <div class="sidebar-brand-sub">PSU Faculty of Management</div>
  </div>
  <div class="sidebar-section-label">เมนูหลัก</div>
  <nav class="sidebar-nav">
    <a class="nav-item" href="dashboard.html">
      <svg class="nav-icon" viewBox="0 0 20 20" fill="currentColor"><path d="M2 10.5a1.5 1.5 0 113 0v6a1.5 1.5 0 01-3 0v-6zM6 10.333v5.43a2 2 0 001.106 1.79l.05.025A4 4 0 008.943 18h5.416a2 2 0 001.962-1.608l1.2-6A2 2 0 0015.56 8H12V4a2 2 0 00-2-2 1 1 0 00-1 1v.667a4 4 0 01-.8 2.4L6.8 7.933a4 4 0 00-.8 2.4z"/></svg>
      แดชบอร์ด
    </a>
    <a class="nav-item" href="study-plan.html">
      <svg class="nav-icon" viewBox="0 0 20 20" fill="currentColor"><path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"/><path fill-rule="evenodd" d="M4 5a2 2 0 012-2 3 3 0 003 3h2a3 3 0 003-3 2 2 0 012 2v11a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3zm-3 4a1 1 0 100 2h.01a1 1 0 100-2H7zm3 0a1 1 0 100 2h3a1 1 0 100-2h-3z" clip-rule="evenodd"/></svg>
      แผนการศึกษา
    </a>
    <a class="nav-item" href="course-list.html">
      <svg class="nav-icon" viewBox="0 0 20 20" fill="currentColor"><path d="M10.394 2.08a1 1 0 00-.788 0l-7 3a1 1 0 000 1.84L5.25 8.051a.999.999 0 01.356-.257l4-1.714a1 1 0 11.788 1.838L7.667 9.088l1.94.831a1 1 0 00.787 0l7-3a1 1 0 000-1.838l-7-3zM3.31 9.397L5 10.12v4.102a8.969 8.969 0 00-1.05-.174 1 1 0 01-.89-.89 11.115 11.115 0 01.25-3.762zM9.3 16.573A9.026 9.026 0 007 14.935v-3.957l1.818.78a3 3 0 002.364 0l5.508-2.361a11.026 11.026 0 01.25 3.762 1 1 0 01-.89.89 8.968 8.968 0 00-5.35 2.524 1 1 0 01-1.4 0zM6 18a1 1 0 001-1v-2.065a8.935 8.935 0 00-2-.712V17a1 1 0 001 1z"/></svg>
      หลักสูตร
    </a>
    <a class="nav-item active" href="qa-dashboard.html">
      <svg class="nav-icon" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M6.267 3.455a3.066 3.066 0 001.745-.723 3.066 3.066 0 013.976 0 3.066 3.066 0 001.745.723 3.066 3.066 0 012.812 2.812c.051.643.304 1.254.723 1.745a3.066 3.066 0 010 3.976 3.066 3.066 0 00-.723 1.745 3.066 3.066 0 01-2.812 2.812 3.066 3.066 0 00-1.745.723 3.066 3.066 0 01-3.976 0 3.066 3.066 0 00-1.745-.723 3.066 3.066 0 01-2.812-2.812 3.066 3.066 0 00-.723-1.745 3.066 3.066 0 010-3.976 3.066 3.066 0 00.723-1.745 3.066 3.066 0 012.812-2.812zm7.44 5.252a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/></svg>
      ประกันคุณภาพการศึกษา
    </a>
  </nav>
  <div class="sidebar-footer">
    <a class="nav-item" href="#" id="logoutBtn">
      <svg class="nav-icon" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M3 3a1 1 0 00-1 1v12a1 1 0 102 0V4a1 1 0 00-1-1zm10.293 9.293a1 1 0 001.414 1.414l3-3a1 1 0 000-1.414l-3-3a1 1 0 10-1.414 1.414L14.586 9H7a1 1 0 100 2h7.586l-1.293 1.293z" clip-rule="evenodd"/></svg>
      ออกจากระบบ
    </a>
  </div>
</aside>

<!-- TOPBAR -->
<header class="topbar">
  <div class="topbar-left">
    <div class="topbar-title" id="topbarTitle">เพิ่มข้อมูล QA</div>
    <div class="topbar-breadcrumb">
      <a href="qa-dashboard.html">ประกันคุณภาพ</a> · <span id="topbarSub">เลือกข้อมูลที่ต้องการเพิ่ม</span>
    </div>
  </div>
  <div class="topbar-right">
    <div class="search-wrap">
      <svg width="15" height="15" viewBox="0 0 20 20" fill="none" stroke="currentColor" stroke-width="2"><circle cx="8.5" cy="8.5" r="5.5"/><path d="M15 15l-3.5-3.5"/></svg>
      <input type="text" placeholder="ค้นหาข้อมูล..." />
    </div>
    <div class="avatar-wrap">
      <div class="avatar-name">Administrator</div>
      <div class="avatar-circle">A</div>
    </div>
  </div>
</header>

<!-- MAIN -->
<main class="main">
  <div class="page-body">

    <div class="page-heading-wrap">
      <div class="page-heading" id="pageHeading">เลือกข้อมูลที่ต้องการเพิ่ม</div>
      <div class="page-sub" id="pageSub">เลือกหมวดหมู่และประเภทข้อมูลที่ต้องการดำเนินการ</div>
    </div>

    <!-- Mode banner -->
    <div class="mode-banner add-mode" id="modeBanner">
      <svg width="18" height="18" viewBox="0 0 20 20" fill="currentColor">
        <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-11a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V7z" clip-rule="evenodd"/>
      </svg>
      <span id="bannerText">คุณกำลังอยู่ในโหมด <strong>เพิ่มข้อมูลใหม่</strong> — กดปุ่มด้านขวาเพื่อสลับไปโหมดแก้ไข</span>
      <button class="mode-switch-btn" id="modeSwitchBtn">สลับเป็นโหมดแก้ไข</button>
    </div>

    <!-- PLO / MLO -->
    <div class="category-section">
      <div class="category-header">
        <div class="category-dot purple"></div>
        <div class="category-title">ผลลัพธ์การเรียนรู้ (PLO / MLO / CLO)</div>
        <span class="category-badge">4 รายการ</span>
      </div>

      <div class="item-row">
        <div class="item-icon" style="background:var(--purple-light)">
          <svg width="18" height="18" viewBox="0 0 20 20" fill="currentColor" style="color:var(--purple)"><path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"/><path fill-rule="evenodd" d="M4 5a2 2 0 012-2 3 3 0 003 3h2a3 3 0 003-3 2 2 0 012 2v11a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3zm-3 4a1 1 0 100 2h.01a1 1 0 100-2H7zm3 0a1 1 0 100 2h3a1 1 0 100-2h-3z" clip-rule="evenodd"/></svg>
        </div>
        <div class="item-info">
          <div class="item-name">ผลลัพธ์การเรียนรู้ (Learning Outcomes)</div>
          <div class="item-desc">PLO, MLO และ CLO ของหลักสูตร</div>
        </div>
        <!-- href จะถูกใส่โดย JS -->
        <a class="btn-action add" id="btn-plo" href="plo.html">
          <svg width="14" height="14" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z" clip-rule="evenodd"/></svg>
          เพิ่ม
        </a>
      </div>

      <div class="item-row">
        <div class="item-icon" style="background:var(--purple-light)">
          <svg width="18" height="18" viewBox="0 0 20 20" fill="currentColor" style="color:var(--purple)"><path fill-rule="evenodd" d="M5 4a1 1 0 00-2 0v7.268a2 2 0 000 3.464V16a1 1 0 102 0v-1.268a2 2 0 000-3.464V4zM11 4a1 1 0 10-2 0v1.268a2 2 0 000 3.464V16a1 1 0 102 0V8.732a2 2 0 000-3.464V4zM16 3a1 1 0 011 1v7.268a2 2 0 010 3.464V16a1 1 0 11-2 0v-1.268a2 2 0 010-3.464V4a1 1 0 011-1z" clip-rule="evenodd"/></svg>
        </div>
        <div class="item-info">
          <div class="item-name">Alignment Matrix</div>
          <div class="item-desc">ความสัมพันธ์ระหว่าง PLO และรายวิชา</div>
        </div>
        <a class="btn-action add" id="btn-matrix" href="matrix.html">
          <svg width="14" height="14" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z" clip-rule="evenodd"/></svg>
          เพิ่ม
        </a>
      </div>

      <div class="item-row">
        <div class="item-icon" style="background:var(--purple-light)">
          <svg width="18" height="18" viewBox="0 0 20 20" fill="currentColor" style="color:var(--purple)"><path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"/><path fill-rule="evenodd" d="M4 5a2 2 0 012-2 3 3 0 003 3h2a3 3 0 003-3 2 2 0 012 2v11a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm9.707 5.707a1 1 0 00-1.414-1.414L9 12.586l-1.293-1.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/></svg>
        </div>
        <div class="item-info">
          <div class="item-name">คะแนนผลลัพธ์ PLO</div>
          <div class="item-desc">ผลการประเมิน PLO แต่ละข้อ</div>
        </div>
        <a class="btn-action add" id="btn-score" href="score-plo.html">
          <svg width="14" height="14" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z" clip-rule="evenodd"/></svg>
          เพิ่ม
        </a>
      </div>

      <div class="item-row">
        <div class="item-icon" style="background:var(--purple-light)">
          <svg width="18" height="18" viewBox="0 0 20 20" fill="currentColor" style="color:var(--purple)"><path fill-rule="evenodd" d="M3 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd"/></svg>
        </div>
        <div class="item-info">
          <div class="item-name">PLO MLO CLO และ KAS</div>
          <div class="item-desc">โครงสร้างผลลัพธ์การเรียนรู้ทั้งหมด</div>
        </div>
        <a class="btn-action add" id="btn-kas" href="kas.html">
          <svg width="14" height="14" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z" clip-rule="evenodd"/></svg>
          เพิ่ม
        </a>
      </div>
    </div>

    <!-- Stakeholders -->
    <div class="category-section">
      <div class="category-header">
        <div class="category-dot amber"></div>
        <div class="category-title">Stakeholders</div>
        <span class="category-badge" style="background:var(--amber-bg);color:var(--amber)">1 รายการ</span>
      </div>
      <div class="item-row">
        <div class="item-icon" style="background:var(--amber-bg)">
          <svg width="18" height="18" viewBox="0 0 20 20" fill="currentColor" style="color:var(--amber)"><path d="M13 6a3 3 0 11-6 0 3 3 0 016 0zM18 8a2 2 0 11-4 0 2 2 0 014 0zM14 15a4 4 0 00-8 0v3h8v-3zM6 8a2 2 0 11-4 0 2 2 0 014 0zM16 18v-3a5.972 5.972 0 00-.75-2.906A3.005 3.005 0 0119 15v3h-3zM4.75 12.094A5.973 5.973 0 004 15v3H1v-3a3 3 0 013.75-2.906z"/></svg>
        </div>
        <div class="item-info">
          <div class="item-name">Stakeholders</div>
          <div class="item-desc">ความพึงพอใจของผู้มีส่วนได้ส่วนเสีย</div>
        </div>
        <a class="btn-action add" id="btn-stakeholder" href="stakeholder.html">
          <svg width="14" height="14" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z" clip-rule="evenodd"/></svg>
          เพิ่ม
        </a>
      </div>
    </div>

    <!-- Analytics -->
    <div class="category-section">
      <div class="category-header">
        <div class="category-dot blue"></div>
        <div class="category-title">Analytics</div>
        <span class="category-badge" style="background:var(--blue-bg);color:var(--blue)">4 รายการ</span>
      </div>

      <div class="item-row">
        <div class="item-icon" style="background:var(--blue-bg)">
          <svg width="18" height="18" viewBox="0 0 20 20" fill="currentColor" style="color:var(--blue)"><path d="M9 6a3 3 0 11-6 0 3 3 0 016 0zM17 6a3 3 0 11-6 0 3 3 0 016 0zM12.93 17c.046-.327.07-.66.07-1a6.97 6.97 0 00-1.5-4.33A5 5 0 0119 16v1h-6.07zM6 11a5 5 0 015 5v1H1v-1a5 5 0 015-5z"/></svg>
        </div>
        <div class="item-info">
          <div class="item-name">สถิติจำนวนนักศึกษา</div>
          <div class="item-desc">จำนวนนักศึกษาแยกตามชั้นปีและสาขา</div>
        </div>
        <a class="btn-action add" id="btn-students" href="analytics-students.html">
          <svg width="14" height="14" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z" clip-rule="evenodd"/></svg>
          เพิ่ม
        </a>
      </div>

      <div class="item-row">
        <div class="item-icon" style="background:var(--blue-bg)">
          <svg width="18" height="18" viewBox="0 0 20 20" fill="currentColor" style="color:var(--blue)"><path fill-rule="evenodd" d="M6.267 3.455a3.066 3.066 0 001.745-.723 3.066 3.066 0 013.976 0 3.066 3.066 0 001.745.723 3.066 3.066 0 012.812 2.812c.051.643.304 1.254.723 1.745a3.066 3.066 0 010 3.976 3.066 3.066 0 00-.723 1.745 3.066 3.066 0 01-2.812 2.812 3.066 3.066 0 00-1.745.723 3.066 3.066 0 01-3.976 0 3.066 3.066 0 00-1.745-.723 3.066 3.066 0 01-2.812-2.812 3.066 3.066 0 00-.723-1.745 3.066 3.066 0 010-3.976 3.066 3.066 0 00.723-1.745 3.066 3.066 0 012.812-2.812zm7.44 5.252a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/></svg>
        </div>
        <div class="item-info">
          <div class="item-name">สถานะการศึกษา</div>
          <div class="item-desc">สถานะนักศึกษาปัจจุบัน ลาออก สำเร็จการศึกษา</div>
        </div>
        <a class="btn-action add" id="btn-status" href="analytics-status.html">
          <svg width="14" height="14" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z" clip-rule="evenodd"/></svg>
          เพิ่ม
        </a>
      </div>

      <div class="item-row">
        <div class="item-icon" style="background:var(--blue-bg)">
          <svg width="18" height="18" viewBox="0 0 20 20" fill="currentColor" style="color:var(--blue)"><path d="M10.394 2.08a1 1 0 00-.788 0l-7 3a1 1 0 000 1.84L5.25 8.051a.999.999 0 01.356-.257l4-1.714a1 1 0 11.788 1.838L7.667 9.088l1.94.831a1 1 0 00.787 0l7-3a1 1 0 000-1.838l-7-3z"/></svg>
        </div>
        <div class="item-info">
          <div class="item-name">สถิติการฝึกงานสหกิจ</div>
          <div class="item-desc">ข้อมูลการฝึกงานและสหกิจศึกษา</div>
        </div>
        <a class="btn-action add" id="btn-coop" href="analytics-coop.html">
          <svg width="14" height="14" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z" clip-rule="evenodd"/></svg>
          เพิ่ม
        </a>
      </div>

      <div class="item-row">
        <div class="item-icon" style="background:var(--blue-bg)">
          <svg width="18" height="18" viewBox="0 0 20 20" fill="currentColor" style="color:var(--blue)"><path d="M2 11a1 1 0 011-1h2a1 1 0 011 1v5a1 1 0 01-1 1H3a1 1 0 01-1-1v-5zM8 7a1 1 0 011-1h2a1 1 0 011 1v9a1 1 0 01-1 1H9a1 1 0 01-1-1V7zM14 4a1 1 0 011-1h2a1 1 0 011 1v12a1 1 0 01-1 1h-2a1 1 0 01-1-1V4z"/></svg>
        </div>
        <div class="item-info">
          <div class="item-name">สถิติการฝึกงาน</div>
          <div class="item-desc">ข้อมูลสถิติการฝึกงานทั่วไป</div>
        </div>
        <a class="btn-action add" id="btn-intern" href="analytics-intern.html">
          <svg width="14" height="14" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z" clip-rule="evenodd"/></svg>
          เพิ่ม
        </a>
      </div>
    </div>

    <!-- ผลงาน -->
    <div class="category-section">
      <div class="category-header">
        <div class="category-dot green"></div>
        <div class="category-title">ผลงาน</div>
        <span class="category-badge" style="background:var(--green-bg);color:var(--green)">2 รายการ</span>
      </div>

      <div class="item-row">
        <div class="item-icon" style="background:var(--green-bg)">
          <svg width="18" height="18" viewBox="0 0 20 20" fill="currentColor" style="color:var(--green)"><path fill-rule="evenodd" d="M5 2a1 1 0 011 1v1h1a1 1 0 010 2H6v1a1 1 0 01-2 0V6H3a1 1 0 010-2h1V3a1 1 0 011-1zm0 10a1 1 0 011 1v1h1a1 1 0 110 2H6v1a1 1 0 11-2 0v-1H3a1 1 0 110-2h1v-1a1 1 0 011-1zM12 2a1 1 0 01.967.744L14.146 7.2 17.5 9.134a1 1 0 010 1.732l-3.354 1.935-1.18 4.455a1 1 0 01-1.933 0L9.854 12.8 6.5 10.866a1 1 0 010-1.732l3.354-1.935 1.18-4.455A1 1 0 0112 2z" clip-rule="evenodd"/></svg>
        </div>
        <div class="item-info">
          <div class="item-name">ผลงานที่โดดเด่น</div>
          <div class="item-desc">รางวัล ผลงานวิชาการ และความสำเร็จของนักศึกษา</div>
        </div>
        <a class="btn-action add" id="btn-achievement" href="achievement.html">
          <svg width="14" height="14" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z" clip-rule="evenodd"/></svg>
          เพิ่ม
        </a>
      </div>

      <div class="item-row">
        <div class="item-icon" style="background:var(--green-bg)">
          <svg width="18" height="18" viewBox="0 0 20 20" fill="currentColor" style="color:var(--green)"><path fill-rule="evenodd" d="M6 2a2 2 0 00-2 2v12a2 2 0 002 2h8a2 2 0 002-2V7.414A2 2 0 0015.414 6L12 2.586A2 2 0 0010.586 2H6zm2 10a1 1 0 10-2 0v3a1 1 0 102 0v-3zm2-3a1 1 0 011 1v5a1 1 0 11-2 0v-5a1 1 0 011-1zm4-1a1 1 0 10-2 0v7a1 1 0 102 0V8z" clip-rule="evenodd"/></svg>
        </div>
        <div class="item-info">
          <div class="item-name">สถิติการทำงานหลังจบการศึกษา</div>
          <div class="item-desc">ข้อมูลการมีงานทำและเงินเดือนของบัณฑิต</div>
        </div>
        <a class="btn-action add" id="btn-graduate" href="graduate-stats.html">
          <svg width="14" height="14" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z" clip-rule="evenodd"/></svg>
          เพิ่ม
        </a>
      </div>
    </div>

  </div>
</main>

<script>
if (!localStorage.getItem("user")) { window.location.href = "login.html"; }

document.getElementById("logoutBtn").addEventListener("click", e => {
  e.preventDefault();
  localStorage.removeItem("user");
  window.location.href = "login.html";
});

// ── Map ของแต่ละปุ่ม: { addUrl, editUrl, label } ──
const itemMap = {
  "btn-plo":         { add: "plo.html",               edit: "plo.html?mode=edit",               label: "Learning Outcomes" },
  "btn-matrix":      { add: "matrix.html",             edit: "matrix.html?mode=edit",             label: "Alignment Matrix" },
  "btn-score":       { add: "score-plo.html",          edit: "score-plo.html?mode=edit",          label: "คะแนนผลลัพธ์ PLO" },
  "btn-kas":         { add: "kas.html",                edit: "kas.html?mode=edit",                label: "PLO MLO CLO & KAS" },
  "btn-stakeholder": { add: "stakeholder.html",        edit: "stakeholder.html?mode=edit",        label: "Stakeholders" },
  "btn-students":    { add: "analytics-students.html", edit: "analytics-students.html?mode=edit", label: "สถิติจำนวนนักศึกษา" },
  "btn-status":      { add: "analytics-status.html",   edit: "analytics-status.html?mode=edit",   label: "สถานะการศึกษา" },
  "btn-coop":        { add: "analytics-coop.html",     edit: "analytics-coop.html?mode=edit",     label: "สถิติสหกิจ" },
  "btn-intern":      { add: "analytics-intern.html",   edit: "analytics-intern.html?mode=edit",   label: "สถิติการฝึกงาน" },
  "btn-achievement": { add: "achievement.html",        edit: "achievement.html?mode=edit",        label: "ผลงานที่โดดเด่น" },
  "btn-graduate":    { add: "graduate-stats.html",     edit: "graduate-stats.html?mode=edit",     label: "สถิติการทำงานหลังจบ" },
};

// ── ตรวจ mode จาก URL ──
const params  = new URLSearchParams(window.location.search);
let isEdit    = params.get("mode") === "edit";

function applyMode() {
  const banner      = document.getElementById("modeBanner");
  const bannerText  = document.getElementById("bannerText");
  const switchBtn   = document.getElementById("modeSwitchBtn");
  const heading     = document.getElementById("pageHeading");
  const sub         = document.getElementById("pageSub");
  const topTitle    = document.getElementById("topbarTitle");
  const topSub      = document.getElementById("topbarSub");

  if (isEdit) {
    // ── Edit mode ──
    banner.className      = "mode-banner edit-mode";
    banner.querySelector("svg").innerHTML = `<path fill-rule="evenodd" d="M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z" clip-rule="evenodd"/>`;
    bannerText.innerHTML  = `คุณกำลังอยู่ในโหมด <strong>แก้ไขข้อมูลเดิม</strong> — กดปุ่มเพื่อสลับกลับโหมดเพิ่มข้อมูล`;
    switchBtn.textContent = "สลับเป็นโหมดเพิ่มข้อมูล";
    heading.textContent   = "เลือกข้อมูลที่ต้องการแก้ไข";
    sub.textContent       = "เลือกหมวดหมู่ที่ต้องการแก้ไขข้อมูลที่มีอยู่แล้วในระบบ";
    topTitle.textContent  = "แก้ไขข้อมูล QA";
    topSub.textContent    = "เลือกข้อมูลที่ต้องการแก้ไข";

    // อัปเดตทุกปุ่มเป็น edit mode (สีเหลือง + label "แก้ไข")
    Object.entries(itemMap).forEach(([id, urls]) => {
      const btn = document.getElementById(id);
      if (!btn) return;
      btn.href      = urls.edit;
      btn.className = "btn-action edit";
      btn.innerHTML = `<svg width="14" height="14" viewBox="0 0 20 20" fill="currentColor"><path d="M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z"/></svg> แก้ไข`;
    });

  } else {
    // ── Add mode ──
    banner.className      = "mode-banner add-mode";
    banner.querySelector("svg").innerHTML = `<path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-11a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V7z" clip-rule="evenodd"/>`;
    bannerText.innerHTML  = `คุณกำลังอยู่ในโหมด <strong>เพิ่มข้อมูลใหม่</strong> — กดปุ่มด้านขวาเพื่อสลับไปโหมดแก้ไข`;
    switchBtn.textContent = "สลับเป็นโหมดแก้ไข";
    heading.textContent   = "เลือกข้อมูลที่ต้องการเพิ่ม";
    sub.textContent       = "เลือกหมวดหมู่และประเภทข้อมูลที่ต้องการดำเนินการ";
    topTitle.textContent  = "เพิ่มข้อมูล QA";
    topSub.textContent    = "เลือกข้อมูล PLO/MLO ที่ต้องการเพิ่ม";

    // อัปเดตทุกปุ่มเป็น add mode (สีม่วง + label "เพิ่ม")
    Object.entries(itemMap).forEach(([id, urls]) => {
      const btn = document.getElementById(id);
      if (!btn) return;
      btn.href      = urls.add;
      btn.className = "btn-action add";
      btn.innerHTML = `<svg width="14" height="14" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z" clip-rule="evenodd"/></svg> เพิ่ม`;
    });
  }
}

// ── ปุ่มสลับ mode ──
document.getElementById("modeSwitchBtn").addEventListener("click", () => {
  isEdit = !isEdit;
  // อัปเดต URL โดยไม่ reload
  const newUrl = isEdit
    ? window.location.pathname + "?mode=edit"
    : window.location.pathname;
  history.replaceState(null, "", newUrl);
  applyMode();
});

// เริ่มต้น
applyMode();
</script>
</body>
</html>